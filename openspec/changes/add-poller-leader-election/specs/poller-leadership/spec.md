## ADDED Requirements

### Requirement: 多节点单主轮询

系统 SHALL 在多节点部署时保证任意时刻只有一个节点执行轮询请求，其余节点仅负责展示与读取数据。

#### Scenario: 多节点并行运行时仅一主执行

- **WHEN** 有多个节点同时运行
- **THEN** 仅主节点执行 Provider 请求与写入历史记录
- **AND** 其余节点不得发起外部健康检查请求

#### Scenario: 单节点部署保持原有行为

- **WHEN** 仅有单个节点运行
- **THEN** 该节点自动成为主节点并执行轮询

### Requirement: 动态选主与失败切换

系统 SHALL 使用租约机制动态选主，并在主节点失效时允许备节点接管。

#### Scenario: 主节点租约续租

- **WHEN** 节点为主节点
- **THEN** 应按固定频率续租以保持主身份
- **AND** 租约过期前完成续租

#### Scenario: 主节点失效后接管

- **WHEN** 主节点续租失败或租约过期
- **THEN** 备节点应在租约过期后接管为主节点
- **AND** 接管后开始执行轮询请求

### Requirement: 节点身份配置

系统 SHALL 从环境变量 `CHECK_NODE_ID` 读取节点身份，用于记录与排查主节点来源。

#### Scenario: 多节点并行启动时先抢到租约者为主

- **WHEN** 多个节点并行启动
- **THEN** 先成功获取租约的节点成为主节点

#### Scenario: 节点身份用于租约记录

- **WHEN** 节点获取租约成为主节点
- **THEN** 系统应记录该节点的身份标识

### Requirement: 固定租约与续租频率

系统 SHALL 使用固定租约时长与续租频率，不提供配置项。

#### Scenario: 使用固定默认值续租

- **WHEN** 节点成为主节点
- **THEN** 租约时长为 120 秒
- **AND** 续租间隔为 30 秒
